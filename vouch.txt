http://indiewebcamp.com/vouch

{{stub}}

The '''<dfn>vouch</dfn>''' protocol is an anti-[[spam]] extension to [[webmention]].

See http://indiewebcamp.com/irc/2014-09-28#t1411927207068 for a braindump and Q&A (follows into next day).

== Protocol Summary ==
If Aaron's blog supports receiving vouch webmentions, and Barnaby's blog supports sending vouch webmentions, then this is how they interact:

Presuppose that Aaron's blog has a friends page, or some public XFN list (following)
Presuppose that Barnaby already has a private list of sites that link back to his own site (including URLs to prove that the link back)

=== Vouch Selection ===
# User Aaron posts a blog post on his blog
# User Barnaby writes post on his blog that links to Aaron's post.
# After publishing the post (i.e. it has a URL), Barnaby's server notices this link as part of the publishing process
# Barnaby's server does webmention discovery on Aaron's post to find its webmention endpoint (if not found, process stops)
# Barnaby checks his own list of followers to see if Aaron is listed.
#* If so, Barnaby proceed to '''Sending''' with <code>vouch</code> set to the link stored with this entry.
# Barnaby's server checks Aaron's home page for a list of friends and any non-nofollow links.
# Barnaby checks if Aaron's list already contains his site.
#* If so, Barnaby stores this link in his private list and proceed to '''Sending''' with <code>vouch</code> set to permalink to the page on Aaron's site that contained this entry.
# Barnaby compares Aaron's list to his own list of followers.
# If Barnaby finds a match between the lists, he proceeds to '''Sending''' using the URL stored with the match in his list as the <code>vouch</code> value.
# If Barnaby has not found any relation, he proceeds to '''Sending''' without a <code>vouch</code> value.

=== Sending ===
# Barnaby's server sends a webmention to Aaron's post's webmention endpoint with 
#* <code>source</code> set to Barnaby's post's permalink
#* <code>target</code> set to Aaron's post's permalink.
#* <code>vouch</code> (if any) set to permalink of a page that links to Barnaby's site, that Aaron will see as an acceptable source.

=== Receiving ===
# Aaron's server receives the webmention
# Aaron's server verifies that <code>target</code> (after following redirects) in the webmention is a valid permalink on Aaron's blog (if not, processing stops)
# Aaron's server verifies that the <code>source</code> (when retrieved, after following redirects) in the webmention contains a hyperlink to the <code>target</code> (if not, processing stops)
# Aaron's server checks for the existance of a <code>vouch</code> value.  (if not, webmentions is marked for moderation and processing stops or proceeds to further spam filtering methods)
# Aaron's server checks that the base site of <code>vouch</code> is either his own site, or a site in his friends list. (if not, webmentions is marked for moderation and processing stops or proceeds to further spam filtering methods)


== to do ==
To be written up here in this wiki page from that braindump
* clean up vouch protocol flow summary
* vouch protocol flow details
* vouch FAQ

To be drawn and posted:
* vouch user-flow diagram
* vouch protocol-flow diagram

== See Also ==
* [[webmention]]
* [[spam]]
